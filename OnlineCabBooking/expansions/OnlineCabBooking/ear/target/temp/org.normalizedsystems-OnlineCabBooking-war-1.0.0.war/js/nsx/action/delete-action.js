define(["require","exports","knockout","nsx/nsx-data","nsx/triggers","nsx/error/error-trigger","./response-validation"],(function(e,r,s,i,n,t,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defineDeleteAction=void 0,r.defineDeleteAction=function(e,r){var a=e.selection,g=e.trigger,c=t.defineTrigger({subject:e.element.getQualifiedName()+".delete"}),l=s.observable({}),u=s.observable(!1),d=s.observableArray([]),f=s.observableArray([]),b=s.observable({}),v=n.defineTrigger(),p=n.defineTrigger(),m=n.defineTrigger();function E(){l({}),u(!1),d([]),f([]),b({})}function M(e){u(e.success),(0,o.isError)(e)?function(e){E(),f(e.errorMessages),b(e.fieldErrorMap),m.trigger(),c.errors(e.errorMessages)}(e):function(e){E(),l(e.value),d(e.messages),p.trigger()}(e),v.trigger()}return g.subscribe((function(){var r=s.unwrap(a).id;i.deleteDetails(e.element,r).then(M)})),{result:l,success:u,messages:d,errorMessages:f,fieldErrorMap:b,completeEvent:v,successEvent:p,errorEvent:m}}}));