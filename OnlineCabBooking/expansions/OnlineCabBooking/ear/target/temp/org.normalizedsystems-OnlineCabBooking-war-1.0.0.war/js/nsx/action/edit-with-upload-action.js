define(["require","exports","knockout","nsx/nsx-data","nsx/nsx-request","nsx/triggers","nsx/error/error-trigger","nsx/nsx-actions","nsx/nsx-struts-helper"],(function(e,r,s,n,t,a,i,o,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defineEditAction=void 0,r.defineEditAction=function(e,r){r=r||{};var u=s.observable({}),g=s.observable(!1),l=s.observableArray([]),f=s.observableArray([]),d=s.observable({}),v=a.defineTrigger(),p=a.defineTrigger(),b=a.defineTrigger(),m=i.defineTrigger({subject:e.element.getQualifiedName()+".edit"});function x(){u({}),g(!1),l([]),f([]),d({})}function E(e){g(e.success),e.success?function(e){x(),u(e.value),l(e.messages),p.trigger()}(e):function(e){x(),f(e.errorMessages),d(e.fieldErrorMap),b.trigger(),m.errors(e.errorMessages)}(e),v.trigger()}return e.trigger.subscribe((function(){var r,a=s.unwrap(e.instance),i={};for(var u in a)a.hasOwnProperty(u)&&(a[u]instanceof File?(r=a[u],u):i[u]=a[u]);r?function(r,s){var n=e.element,a=n.getElementName()+"Details",i={};i[a]=r;var u=c.mapToFormData(i);u.append("uploadData",s);var g=o.getElementAction(n,"saveDetails-json");t.postSave({type:"POST",url:g,data:u,processData:!1,contentType:!1}).then(E)}(i,r):function(r){n.saveDetails(e.element,r).then(E)}(i)})),{result:u,success:g,messages:l,errorMessages:f,fieldErrorMap:d,completeEvent:v,successEvent:p,errorEvent:b}}}));