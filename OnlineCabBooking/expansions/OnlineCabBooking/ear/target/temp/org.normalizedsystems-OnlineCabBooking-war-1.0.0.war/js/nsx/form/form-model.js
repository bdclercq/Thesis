define(["require","exports","knockout","nsx/util/utils","nsx/field/field-model","nsx/field/field-type"],(function(e,i,u,a,n,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.defineFormModel=void 0,i.defineFormModel=function(e,i){var d,f={},t=[],o=e.fields,r=e.data;function s(e){e&&t.forEach((function(i){var n=u.toJS(e[i.fieldName]);i.isValueType&&a.isDefined(n)?i.update(n.value):i.update(n)}))}return o.forEach((function(e){!function(e){t.push(e),f[e.fieldName]=e}(n.defineField(e))})),f.fields=t,f.detailModel=(d={},t.forEach((function(e){e.isValueType?d[e.fieldName]={value:e.value}:d[e.fieldName]=e.value})),d),f.dataModel=u.pureComputed((function(){var e={};return t.forEach((function(i){var n=u.toJS(i.value);a.isDefined(n)&&(i.isValueType?e[i.fieldName]={value:n}:i.type===l.DATAREF?e[i.fieldName]=n.value:i.type===l.FILE?e[i.fieldName]=u.unwrap(i.value):e[i.fieldName]=n)})),e})),r.subscribe?r.subscribe(s):s(r),i.resetOn&&i.resetOn.subscribe((function(){s(u.unwrap(r))})),f}}));