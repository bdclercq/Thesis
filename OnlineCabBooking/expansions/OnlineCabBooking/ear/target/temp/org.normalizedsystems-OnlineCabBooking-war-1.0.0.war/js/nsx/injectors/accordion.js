"use strict";define(["knockout","jquery","nsx/util/utils","nsx/triggers","nsx/injectors/injector","nsx/injectors/page-segment"],(function(e,n,i,t,r,o){function s(s,c){c=c||{};var d,u=s.selector,a=1,l=e.observableArray([]),v=c.parent||o;function f(i){var r=t.defineTrigger();return r.subscribe((function(){i.selected(!i.selected()),i.selected()&&i.injector.reveal()})),{id:i.domain.generateId(),view:i.view,viewModel:i.viewModel,registerPane:function(e){var t=n(e);t.is("div")&&i.injector.completeRendering(t)},label:i.name,showPane:r,visible:i.visible,isSelected:e.pureComputed((function(){return i.selected()}))}}return d=v.definePageSegment({selector:u,view:"nsx/knockout/accordion",viewModel:{panes:e.pureComputed((function(){return l().map(f)}))}}),{definePane:function(n,t){t=t||{};var o,s,c=d.domain.subDomain("pane"+a++),u=new r.Injector({segment:null,domain:c});return o=t.position,s={name:n.name,view:n.view,viewModel:n.viewModel,selected:e.observable(!1),visible:!i.isDefined(t.visible)||t.visible,domain:c,injector:u},i.isDefined(o)?l.splice(o,0,s):l.push(s),u}}}return r.Injector.prototype.defineAccordion=function(e,n){return(n=n||{}).parent=this,s(e,n)},{defineAccordion:s}}));