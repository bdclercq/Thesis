"use strict";define(["nsx/injectors/popup","nsx/injectors/page-segment","nsx/form/form-model","nsx/triggers","nsx/field/field-type","nsx/action/data-upload-action"],(function(e,t,n,o,i,r){var l=[{fieldName:"file",type:i.FILE,key:"upload.file",isValueType:!1},{fieldName:"type",type:i.VALUE,key:"upload.type",isValueType:!1}];function s(e,t){t=t||{};var i=o.defineTrigger(),s=n.defineFormModel({data:{type:e.type},fields:l},{resetOn:t.resetOn}),m=r.defineUploadAction({instance:s.dataModel,trigger:i,element:e.element});return{instance:s,submit:i,success:m.successEvent,error:m.errorEvent,complete:m.completeEvent}}return{defineUploadForm:function(e,t){var n=(t=t||{}).view||"nsx/knockout/command-form",o=t.formView||"nsx/knockout/upload-form",i=s({element:e.element,type:e.type});e.parent.definePageSegment({selector:e.selector,view:n,viewModel:{title:e.title,submitText:"Import",submit:i.submit}}).definePageSegment({selector:"command-form",view:o,viewModel:i})},defineUploadPopup:function(t,n){var o=(n=n||{}).formView||"nsx/knockout/upload-form",i=s({element:t.element,type:t.type});e.definePopup({title:t.title,view:o,viewModel:i,trigger:t.trigger},{onConfirm:i.submit,closeOn:i.complete})}}}));