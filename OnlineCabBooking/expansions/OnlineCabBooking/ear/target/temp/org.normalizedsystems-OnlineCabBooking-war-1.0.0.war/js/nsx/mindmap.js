"use strict";define(["knockout","jquery","nsx/nsx-actions"],(function(e,t,n){return{defineMindmap:function(r,i){var a,o,s=r.selector,u=r.applicationName,p=r.page,c=e.observable(),m=e.observable(),d=e.observable();function l(e){var t="";return"submap"===e.type&&(t=e.mapId),{coords:e.coords,title:e.title,type:e.type,url:e.url,mapId:t,click:f}}function f(e,t){return"submap"!==e.type||(c(e.mapId),!1)}return c.subscribe((function(e){m(function(e){for(var t=d().maps,n=0;n<t.length;n++)if(t[n].id===e)return t[n];return{}}(e))})),a=n.getApplicationAction("mindmap-json"),o={mindmap:u},t.get(a,o,(function(e){!0!==e.success&&console.log("Error in mindmap result"),d(e),c(e.startId)})),p.definePageSegment({selector:s,view:"nsx/knockout/mindmap-page-layout",viewModel:e.pureComputed((function(){var e,t,n=[];if(m()){var r=m();e="/"+u+"/images/"+r.imageName,t=r.imageWidth+"px";for(var i=0;i<r.parts.length;i++)n.push(l(r.parts[i]))}return{imagePath:e,imageWidth:t,items:n}}))})}}}));