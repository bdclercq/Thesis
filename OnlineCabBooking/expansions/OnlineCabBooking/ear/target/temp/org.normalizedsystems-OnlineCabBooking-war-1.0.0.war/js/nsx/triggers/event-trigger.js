define(["require","exports","pubsub-js","knockout"],(function(e,n,t,i){"use strict";function r(e){return e.length<=0||"all"===e?"event":"event."+e}Object.defineProperty(n,"__esModule",{value:!0}),n.INIT_EVENT=n.defineEventTrigger=n.defineEventListener=void 0;var s=function(e,n){var s=this;this.trigger=function(){var e;return e=s.source?"function"==typeof s.source?s.source():i.toJS(s.source):new Date,console.log("["+s.eventKey+"]: "+JSON.stringify(e)),t.publish(s.eventKey,e),!0},this.eventKey=r(e),this.source=n},u=function(e){var n=this;this.subscribe=function(e){t.subscribe(n.eventKey,(function(n,t){e.call(this,t)}))},this.subscribeOnMessage=function(e){t.subscribe(n.eventKey,(function(n,t){var i;e.call(this,"event"===(i=n)?"all":i.substr(6),t)}))},this.eventKey=r(e)};function o(e){return new u(e.key)}n.defineEventListener=o,n.defineEventTrigger=function(e){return new s(e.key,e.source)},n.INIT_EVENT=o({key:"init"})}));