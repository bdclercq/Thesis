define(["require","exports","knockout","jquery","mousetrap","nsx/nsx-dialog","mousetrap-global"],(function(e,n,o,t,r,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.registerShortcut=void 0;var a=o.observable(!1);function c(){return t(document.activeElement)}n.registerShortcut=function(e){var n=e.scope||"page";if(r.bindGlobal(e.key,(function(o){(function(e,n){var o=s.hasDialogs(),t=c().is("form *"),r=c().is("input");switch(n){case"dialog":return o;case"page":return!o&&!r;case"form":return t;case"global":return!0}})(0,n)&&(e.callback(),o.preventDefault())})),e.element){var o=t("<span class='tooltip-shortcut'>"+e.key+"</span>");a.subscribe((function(e){e?o.css("display","block"):o.css("display","none")})),t(e.element).append(o)}},t(document).on("keydown",(function(e){c().is("body")&&16===e.keyCode&&a(!0)})),t(document).on("keyup",(function(e){16===e.keyCode&&a(!1)}))}));