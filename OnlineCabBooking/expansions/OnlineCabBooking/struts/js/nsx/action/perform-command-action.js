define(["require","exports","knockout","nsx/nsx-agent","nsx/triggers"],(function(e,r,n,s,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.definePerformCommandAction=void 0,r.definePerformCommandAction=function(e,r){r=r||{};var t=n.observable(!1),i=n.observable({}),a=n.observable(!1),c=n.observableArray([]),u=n.observable(),f=n.observable({}),g=o.defineTrigger(),l=o.defineTrigger(),d=o.defineTrigger(),m=s.createAgent(e.element);function v(){i({}),a(!1),c([]),u(),f({})}function b(e){a(e.success),e.success?function(e){var r;v(),i(e.value),c(null!==(r=e.messages)&&void 0!==r?r:[]),l.trigger()}(e):function(e){v(),u(e.errorMessage),e.fieldErrors?f(function(e){var r={};e&&e.forEach((function(e){r[e.qualifiedFieldName]=e.message}));return r}(e.fieldErrors)):f({});d.trigger()}(e),t(!1),g.trigger()}return e.trigger.subscribe((function(){t()||(t(!0),m.perform(e.commandName,n.toJS(e.instance),n.toJS(r.target)).then(b))})),{result:i,success:a,messages:c,errorMessage:u,fieldErrorMap:f,completeEvent:g,successEvent:l,errorEvent:d}}}));