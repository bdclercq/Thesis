define(["require","exports","knockout","nsx/triggers","nsx/nsx-actions","nsx/notification/nsx-notification","nsx/usability/spinner-icon"],(function(e,r,s,n,i,o,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.definePerformTaskAction=void 0,r.definePerformTaskAction=function(e,r){r=r||{};var a=e.selection,c=e.trigger,u=e.element,f=e.taskName,g=r.params||"",p=s.observable({}),l=s.observable(!1),b=s.observableArray([]),d=s.observableArray([]),v=s.observable({}),m=n.defineTrigger(),x=n.defineTrigger(),k=n.defineTrigger();function E(){p({}),l(!1),b([]),d([]),v({})}function T(e){t.hideSpinner(),l(e.success),e.success?function(e){E(),p(e.value),b(e.messages),o.popupInfo(f+" completed"),x.trigger()}(e):function(e){E(),d(e.errorMessages),v(e.fieldErrorMap),o.popupError(f+" failed"),k.trigger()}(e),m.trigger()}return c.subscribe((function(){t.showSpinner(),i.performTask(u,s.unwrap(a),f,g,"").then(T)})),{result:p,success:l,messages:b,errorMessages:d,fieldErrorMap:v,completeEvent:m,successEvent:x,errorEvent:k}}}));