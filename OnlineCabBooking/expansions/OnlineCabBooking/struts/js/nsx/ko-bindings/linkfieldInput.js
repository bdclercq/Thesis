define(["require","exports","knockout","./linkfield/linkfield-select","nsx/nsx-application","./linkfield/linkfield-picklist","./linkfield/linkfield-multi-picklist","./linkfield/linkfield-picklist-button","./linkfield/linkfield-input-autocomplete","./linkfield/linkfield-multiselect"],(function(i,e,t,l,n,d,o,c,a,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={id:0,name:""};function s(i,e){e.autocomplete?(0,a.createLinkFieldAutocomplete)(i,e):(0,l.createLinkFieldSelect)(i,e)}t.bindingHandlers.linkfieldInput={init:function(i,e,l){var a=e();a.dataElement=n.getElement(a.element),function(i){i.finder||(i.finder="findAll"),i.finderDetails||(i.finderDetails={}),i.dropdown||(i.dropdown={displayField:"name"}),i.dropdown.maxSize||(i.dropdown.maxSize=7),i.dropdown.finder||(i.dropdown.finder=i.finder),i.dropdown.finderDetails||(i.dropdown.finderDetails=i.finderDetails),void 0===i.dropdown.includeMore&&(i.picklist||(i.picklist={displayFields:[]}),i.picklist.displayFields&&i.picklist.displayFields.length||(i.picklist.displayFields=[i.dropdown.displayField])),i.picklist&&(void 0===i.dropdown.includeMore&&(i.dropdown.includeMore=!0),i.picklist.finder||(i.picklist.finder=i.finder),i.picklist.finderDetails||(i.picklist.finderDetails=i.finderDetails),i.picklist.pageSize||(i.picklist.pageSize=5)),i.autocomplete&&(i.autocomplete.finder||(i.autocomplete.finder=i.finder),i.autocomplete.finderDetails||(i.autocomplete.finderDetails=i.finderDetails),void 0===i.autocomplete.minimumLength&&(i.autocomplete.minimumLength=1),void 0===i.autocomplete.autocommit&&(i.autocomplete.autocommit=!i.multiple),void 0===i.autocomplete.wildcardPrefix&&(i.autocomplete.wildcardPrefix=!0))}(a),function(i){return!!i.multiple}(a)?function(i,e){(0,p.createLinkFieldMultiSelectionList)(i,e);var l={value:t.observable(r),element:e.element,finder:e.finder,finderDetails:e.finderDetails,dropdown:e.dropdown,autocomplete:e.autocomplete,picklist:e.picklist,dataElement:e.dataElement,picklistButton:e.picklistButton};s(i,l),l.value.subscribe((function(i){0!==i.id&&(e.value().some((function(e){return e.id===i.id}))||e.value.push(i),l.value(r))})),e.picklist&&(0,o.createLinkFieldMultiPicklist)(i,e)}(i,a):function(i,e){s(i,e),e.picklist&&(0,d.createLinkFieldPicklist)(i,e)}(i,a),a.picklistButton&&(0,c.createPicklistButton)(i)},update:function(){}}}));