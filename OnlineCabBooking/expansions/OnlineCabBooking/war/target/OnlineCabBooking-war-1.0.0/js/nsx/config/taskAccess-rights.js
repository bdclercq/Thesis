define(["require","exports","knockout","nsx/util/utils","nsx/triggers","nsx/nsx-profile-access"],(function(e,i,n,t,r,o){"use strict";var s;function g(e,i,n){switch(i){case s.EXECUTE:return e.canExecute}}Object.defineProperty(i,"__esModule",{value:!0}),i.getAccessRightsController=i.TaskRight=void 0,function(e){e[e.EXECUTE=0]="EXECUTE"}(s=i.TaskRight||(i.TaskRight={}));var c=new function(){var e=this;this.config={},this.requestRight=function(i){var s=i.element,c=i.requestedRight,u=i.target,a=s.getQualifiedName(),f=(0,r.defineContinuingTrigger)(),d=(0,r.defineContinuingTrigger)(),l=n.observable(!1);(0,t.isNotDefined)(e.config[a])&&(e.config[a]={rights:{}});var h=e.config[a],E=h.rights;function v(){g(E,c,u)?(f.trigger(),l(!0)):d.trigger()}return(0,t.isDefined)(g(E,c,u))?v():(0,t.isDefined)(h.loaded)?(0,r.when)(h.loaded).thenDo(v):(h.loaded=(0,r.defineContinuingTrigger)(),o.getTaskAccessRightsForElement(s,(function(e){var i=e.value;E.canExecute=i.canExecute,h.loaded.trigger(),v()}))),{approved:l,granted:f,refused:d}},this.printConfig=function(){console.log(e.config)}};i.getAccessRightsController=function(){return c}}));