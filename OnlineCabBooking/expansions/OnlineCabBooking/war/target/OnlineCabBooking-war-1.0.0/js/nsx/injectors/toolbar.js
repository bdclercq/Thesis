define(["require","exports","knockout","nsx/util/utils","nsx/injectors/injector","nsx/injectors/page-segment","nsx/triggers","nsx/nsx-uuid"],(function(e,i,n,o,t,r,s,l){"use strict";function u(e,i){i=i||{};var t=e.selector,u=!o.isDefined(i.visible)||i.visible,v=n.observableArray([]);function d(e){var i={id:l.generateUUID(),view:e.view,viewModel:e.viewModel,visible:e.visible};return o.isDefined(e.position)?v.splice(e.position,0,i):v.push(i),i}function b(e){var i=e.trigger||s.defineTrigger(),n=!0,t=!0;return o.isDefined(e.visible)&&(n=e.visible),o.isDefined(e.enable)&&(t=e.enable),{trigger:i,visible:n,viewModel:{id:e.id||"",shortcut:e.shortcut,trigger:i,layout:e.layout,label:e.label,visible:n,enable:t,icon:e.icon,tooltip:e.tooltip}}}return{defineButton:function(e){var i=b(e),n=i.trigger,o=i.visible,t=d({view:"nsx/knockout/button",viewModel:i.viewModel,visible:o,position:e.position});return t.trigger=n,t},defineDropdownButton:function(e){var i=!o.isDefined(e.visible)||e.visible;return d({view:"nsx/knockout/button-dropdown",viewModel:{label:e.label,buttons:e.buttons.map((function(e){return function(e){var i=b(e),n=i.visible;return{view:"nsx/knockout/button",viewModel:i.viewModel,visible:n,position:e.position}}(e)}))},visible:i,position:e.position})},defineToggleButton:function(e){var i=n.observable(),o=s.defineTrigger();e.trigger=o;var t=b(e),r=t.visible,l=t.viewModel;s.when(o).thenDo((function(){i(!i())})),l.layout=n.pureComputed((function(){return i()?"nsx-button-selected":n.unwrap(e.layout)}));var u=d({view:"nsx/knockout/button",viewModel:l,visible:r,position:e.position});return u.trigger=o,u.active=i,u},defineToolbarSegment:function(e,i){return d({position:(i=i||{}).position,view:e.view,viewModel:e.viewModel,visible:i.visible||!0})},removeButton:function(e){v.remove(e)},rendered:(i.parent||r).definePageSegment({selector:t,view:"nsx/knockout/button-toolbar",viewModel:{segments:v}},{visible:u,renderOn:i.renderOn}).rendered}}Object.defineProperty(i,"__esModule",{value:!0}),i.defineButtonToolbar=void 0,i.defineButtonToolbar=u,t.Injector.prototype.defineButtonToolbar=function(e,i){return(i=i||{}).parent=this,u(e,i)}}));