define(["require","exports","knockout","nsx/triggers","nsx/model/dataref","nsx/util/utils"],(function(e,i,t,n,r,u){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.defineListView=void 0,i.defineListView=function(e,i){i=i||{};var s=e.instanceView,d=t.observable(),o=n.defineTrigger();function a(e){var i=n.defineTrigger(),u={value:s.defineInstanceView({details:e}),dataRef:(0,r.createDataRef)(e.name,e.id),select:i,isSelected:t.pureComputed((function(){return!!d()&&d().id===e.id}))};return i.subscribe((function(){u.isSelected()?d(void 0):d(u.dataRef)})),u}function c(){d(void 0)}return e.page.subscribe((function(){var i=d(),t=e.page();if(!u.isNotDefined(i)){for(var n=!1,r=0;r<t.length;r++)i&&i.id===t[r].id&&(n=!0);n||c()}})),o.subscribe(c),{items:t.pureComputed((function(){for(var i=[],t=e.page(),n=0;n<t.length;n++){var r=a(t[n]);i.push(r)}return i})),selection:d,hasSelection:t.pureComputed((function(){return!!d()})),deselect:o}}}));