"use strict";define(["jquery","knockout"],(function(e,t){function n(){return{getPage:function(t,n,r){return r(0,[]),e.Deferred().reject().promise()}}}return{createListModel:function(r,s,o){var c={},i=r||n(),a=s||{};o=o||{},c.items=t.observableArray(),c.selectedItem=t.observable(),c.selectedItems=t.observableArray([]),c.numberOfPages=t.observable(0),c.totalNumberOfItems=t.observable(0);var u=t.observable(0),l=7;return o.projection,o.rowsPerPage&&(l=o.rowsPerPage),c.elementAccess={canView:t.observable(!0),canEdit:t.observable(!1),canDelete:t.observable(!1)},c.updateElementAccess=function(e){var t=c.elementAccess;void 0!==e.canEdit&&t.canEdit(e.canEdit),void 0!==e.canView&&t.canView(e.canView),void 0!==e.canDelete&&t.canDelete(e.canDelete)},c.clear=function(){c.items.removeAll(),u(0),c.numberOfPages(0)},c.setDataModel=function(e){i=e,c.gotoFirstPage()},c.getDataModel=function(){return i},c.setInteractionModel=function(e){a=e},c.currentPage=t.computed((function(){return u()+1})),c.hasPreviousPage=t.computed((function(){return u()>0})),c.previousPage=function(){if(!c.hasPreviousPage())return e.Deferred().reject().promise();c.gotoPage(u()-1)},c.hasItems=t.computed((function(){return c.items().length>0})),c.hasMultiplePages=t.computed((function(){return c.numberOfPages()>1})),c.hasNextPage=t.computed((function(){return u()+1<c.numberOfPages()})),c.nextPage=function(){return c.hasNextPage()?c.gotoPage(u()+1):e.Deferred().reject().promise()},c.refreshPage=function(n,r,s){t.isWriteableObservable(c.numberOfPages)&&c.numberOfPages(n),t.isWritableObservable(c.totalNumberOfItems)&&c.totalNumberOfItems(s);var o=void 0;c.items.removeAll(),e.each(r,(function(e,t){c.items.push(t),c.isSelectedItem(t)&&(o=t)})),o?(c.selectedItem(o),c.selectedItems.removeAll(),c.selectedItems.push(o)):c.deselectRow()},c.reloadPage=function(){return c.gotoPage(u())},c.gotoPage=function(e){return u(e),i.getPage(e,l,c.refreshPage)},c.gotoFirstPage=function(){return c.gotoPage(0)},c.gotoLastPage=function(){var e=c.numberOfPages(),t=Math.max(0,e-1);return c.gotoPage(t)},c.setRowsPerPage=function(e){l=e},c.getRowsPerPage=function(){return l},c.hasSelection=t.computed((function(){return!!c.selectedItem()})),c.isSelectedItem=function(e){var t=c.selectedItem();return!(!t||!e)&&(t===e||!(!t.id||!e.id)&&t.id===e.id)},c.isSecondarySelectedItem=function(e){return!c.isSelectedItem(e)&&c.selectedItems().some((function(t){return t.id===e.id}))},c.selectRow=function(e){return c.isSelectedItem(e)?c.deselectRow():(c.selectedItem(e),c.selectedItems.removeAll(),c.selectedItems.push(e),a.selectRow&&a.selectRow(e),!0)},c.selectAll=function(e){return c.selectedItem(e),c.selectedItems.removeAll(),t.unwrap(c.items).forEach((function(e){return c.selectedItems.push(e)})),!0},c.deselectRow=function(){c.selectedItem(void 0),c.selectedItems.removeAll(),a.deselectRow&&a.deselectRow()},c.addToSelection=function(e){c.selectedItems().some((function(t){return t.id===e.id}))?c.selectedItems.remove((function(t){return t.id===e.id})):(c.selectedItem(e),c.selectedItems.push(e))},c.selectRange=function(e){var t=c.items(),n=c.selectedItem();c.selectedItems.removeAll();var r=t.indexOf(t.filter((function(e){return e.id===n.id}))[0]),s=t.indexOf(t.filter((function(t){return t.id===e.id}))[0]);if(-1!==r&&-1!==s){if(r<s)for(var o=r;o<=s;o++){var i=t[o];c.selectedItems.push(i)}else for(o=s;o<=r;o++){i=t[o];c.selectedItems.push(i)}c.selectedItems.push(e)}},c.show=function(e){a.show&&a.show(e)},c.create=function(){c.deselectRow(),a.create&&a.create()},c.modify=function(e){a.modify&&a.modify(e)},c.deleteElement=function(e){a.deleteElement&&a.deleteElement(e)},c.showReference=function(e){a.showReference&&a.showReference(e)},c.sorting={sortOnColumn:function(e,t){var n;n="none"===t?[]:[{fieldName:e,ascending:"asc"===t}],i.setSortFields&&i.setSortFields(n),c.gotoFirstPage()}},c.resetFinder=function(){i.resetFinder&&i.resetFinder()},c.setFinder=function(e,t){i.setFinder&&i.setFinder(e,t)},c},createEmptyDataModel:n}}));